<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GeoFrontier â€” Towns of the Month</title>
  <style>
    body { margin:0; font-family:Inter, Arial, sans-serif; background:#f3f3f3; }
    .section { max-width:900px; margin:40px auto; padding:0 20px; }
    .card {
      background:white;
      padding:24px;
      border-radius:12px;
      box-shadow:0 5px 16px rgba(0,0,0,0.08);
      margin-bottom:28px;
    }
    img { width:100%; border-radius:10px; margin:12px 0; }
  </style>
</head>
<body>

<div id="navbar-container"></div>

<script>
  fetch("./components/navbar.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("navbar-container").innerHTML = html;

      // Highlight active page
      const path = window.location.pathname.split("/").pop();
      const link = document.querySelector(`[data-nav="${path.replace('.html','')}"]`);
      if (link) link.classList.add("active");

      // After navbar loads, bind dropdown logic:
      const guideToggle = document.getElementById("guideToggle");
      const guideMenu = document.getElementById("dropdownMenu");

      const supportToggle = document.getElementById("supportToggle");
      const supportMenu = document.getElementById("supportMenu");

      function closeAll() {
        guideMenu.style.display = "none";
        supportMenu.style.display = "none";
      }

      guideToggle.addEventListener("click", () => {
        const open = guideMenu.style.display === "block";
        closeAll();
        guideMenu.style.display = open ? "none" : "block";
      });

      supportToggle.addEventListener("click", () => {
        const open = supportMenu.style.display === "block";
        closeAll();
        supportMenu.style.display = open ? "none" : "block";
      });

      window.addEventListener("click", (e) => {
        if (
          !guideToggle.contains(e.target) &&
          !guideMenu.contains(e.target) &&
          !supportToggle.contains(e.target) &&
          !supportMenu.contains(e.target)
        ) {
          closeAll();
        }
      });
    });
</script>

<div class="section">
  <h1>ğŸ† Towns of the Month</h1>
  <div id="town-list"></div>
</div>

<script src="components/town-data.js"></script>
<script>
  const container = document.getElementById("town-list");

  townsOfTheMonth.forEach(n => {
    container.innerHTML += `
      <div class="card">
        <h2>${n.name}</h2> <p style="opacity:0.7;"> Â· ${n.month}</p>
        <img src="${n.image}" alt="${n.name}">
        <p>${n.description}</p>
        <p style="font-size:0.85rem; opacity:0.8;">
          Population: ${n.population} Â· Leader(s): ${n.towns} Â· Ideology: ${n.ideology}
        </p>
      </div>
    `;
  });
</script>

</body>
</html>
