<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoFrontier — Movecraft Naval Guide</title>
  
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Main CSS -->
  <link rel="stylesheet" href="css/styles.css">
  
  <!-- Inline styles for guide page -->
  <style>
    /* Hero section for guide page */
    .guide-hero {
      background: linear-gradient(rgba(2, 6, 23, 0.9), rgba(15, 23, 42, 0.85)), 
                  url('https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');
      background-size: cover;
      background-position: center;
      color: white;
      text-align: center;
      padding: 80px 20px;
      margin-bottom: 30px;
      border-bottom: 2px solid var(--accent-gold);
    }
    
    .guide-hero h1 {
      font-family: 'Cinzel', serif;
      font-size: 3.5rem;
      margin-bottom: 20px;
      color: var(--accent-gold);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    
    .guide-hero p {
      font-size: 1.2rem;
      max-width: 800px;
      margin: 0 auto 25px;
      color: var(--text-light);
      opacity: 0.9;
    }
    
    /* Guide content */
    .guide-content {
      margin: 40px 0;
      position: relative;
    }
    
    .guide-section {
      margin-bottom: 60px;
      scroll-margin-top: 120px;
    }
    
    .guide-section h2 {
      color: var(--accent-gold);
      font-family: 'Cinzel', serif;
      font-size: 2rem;
      margin-bottom: 25px;
      padding-bottom: 10px;
      border-bottom: 2px solid rgba(212, 175, 55, 0.3);
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .guide-section h2 i {
      font-size: 1.8rem;
    }
    
    .guide-card {
      background: var(--card-bg);
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 25px;
      border: 1px solid rgba(212, 175, 55, 0.2);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .guide-card h3 {
      color: var(--accent-teal);
      font-size: 1.4rem;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .guide-card h3 i {
      font-size: 1.2rem;
    }
    
    .guide-text {
      color: var(--text-muted);
      line-height: 1.7;
      margin-bottom: 20px;
    }
    
    .guide-text p {
      margin-bottom: 15px;
    }
    
    .guide-text p:last-child {
      margin-bottom: 0;
    }
    
    .guide-text ul, .guide-text ol {
      padding-left: 20px;
      margin-bottom: 15px;
    }
    
    .guide-text li {
      margin-bottom: 8px;
      color: var(--text-muted);
    }
    
    .guide-text strong {
      color: var(--text-light);
      font-weight: 600;
    }
    
    .guide-text code {
      background: rgba(30, 41, 59, 0.5);
      padding: 2px 8px;
      border-radius: 4px;
      font-family: monospace;
      color: var(--accent-gold);
      font-size: 0.9rem;
    }
    
    /* Info boxes */
    .info-box {
      background: rgba(30, 41, 59, 0.3);
      border-radius: 8px;
      padding: 20px;
      margin: 15px 0;
      border-left: 4px solid var(--accent-teal);
    }
    
    .info-box.warning {
      background: rgba(183, 65, 14, 0.1);
      border-left-color: var(--accent-rust);
    }
    
    .info-box.tip {
      background: rgba(16, 185, 129, 0.1);
      border-left-color: #10b981;
    }
    
    .info-box h4 {
      color: var(--accent-teal);
      margin-bottom: 10px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .info-box.warning h4 {
      color: var(--accent-rust);
    }
    
    .info-box.tip h4 {
      color: #10b981;
    }
    
    /* Ship types grid */
    .ship-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .ship-card {
      background: rgba(15, 23, 42, 0.7);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid rgba(212, 175, 55, 0.2);
      transition: all 0.3s ease;
    }
    
    .ship-card:hover {
      transform: translateY(-5px);
      border-color: var(--accent-gold);
      box-shadow: 0 10px 20px rgba(212, 175, 55, 0.1);
    }
    
    .ship-card h4 {
      color: var(--accent-gold);
      margin-bottom: 10px;
      font-family: 'Cinzel', serif;
    }
    
    .ship-stats {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 10px 0;
    }
    
    .ship-stat {
      background: rgba(30, 41, 59, 0.5);
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.85rem;
      color: var(--text-light);
    }
    
    /* Command reference */
    .commands-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    
    .command-card {
      background: rgba(15, 23, 42, 0.7);
      border-radius: 10px;
      padding: 15px;
      border-left: 4px solid var(--accent-teal);
    }
    
    .command-name {
      color: var(--accent-gold);
      font-family: monospace;
      font-size: 1rem;
      margin-bottom: 5px;
    }
    
    .command-desc {
      color: var(--text-muted);
      font-size: 0.9rem;
    }
    
    /* Quick nav - FIXED POSITION */
    .quick-nav {
      position: fixed;
      top: 200px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 1200px;
      background: rgba(15, 23, 42, 0.95);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid rgba(212, 175, 55, 0.2);
      backdrop-filter: blur(10px);
      z-index: 1000;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      display: none; /* Hidden by default, shown by JS */
    }
    
    .quick-nav.visible {
      display: block;
    }
    
    .quick-nav h3 {
      color: var(--accent-gold);
      margin-bottom: 15px;
      font-family: 'Cinzel', serif;
    }
    
    .nav-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .nav-link {
      color: var(--text-light);
      text-decoration: none;
      padding: 8px 15px;
      border-radius: 5px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
    }
    
    .nav-link:hover {
      background: rgba(212, 175, 55, 0.1);
      color: var(--accent-gold);
      padding-left: 20px;
    }
    
    .nav-link.active {
      background: rgba(212, 175, 55, 0.2);
      color: var(--accent-gold);
      border-left: 4px solid var(--accent-gold);
    }
    
    /* Mobile quick nav trigger */
    .mobile-nav-trigger {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--accent-gold);
      color: var(--primary-dark);
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      z-index: 999;
      display: none;
    }
    
    .mobile-nav-trigger:hover {
      transform: scale(1.1);
    }
    
    /* Requirements list */
    .requirements-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    
    .requirement-item {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-light);
    }
    
    .requirement-item i {
      color: var(--accent-gold);
    }
    
    /* Responsive design */
    @media (max-width: 1024px) {
      .quick-nav {
        position: fixed;
        top: 150px;
        width: 95%;
        max-width: 95%;
        left: 50%;
        transform: translateX(-50%);
      }
    }
    
    @media (max-width: 768px) {
      .guide-hero h1 {
        font-size: 2.5rem;
      }
      
      .quick-nav {
        position: fixed;
        top: 120px;
        width: 90%;
        left: 50%;
        transform: translateX(-50%);
        display: none;
      }
      
      .quick-nav.visible {
        display: block;
      }
      
      .mobile-nav-trigger {
        display: flex;
      }
      
      .ship-grid {
        grid-template-columns: 1fr;
      }
      
      .commands-grid {
        grid-template-columns: 1fr;
      }
      
      .nav-links {
        max-height: 300px;
        overflow-y: auto;
      }
    }
    
    @media (max-width: 480px) {
      .guide-hero {
        padding: 60px 20px;
      }
      
      .guide-hero h1 {
        font-size: 2rem;
      }
      
      .guide-section h2 {
        font-size: 1.5rem;
      }
      
      .guide-card h3 {
        font-size: 1.2rem;
      }
      
      .quick-nav {
        top: 100px;
        width: 95%;
      }
      
      .mobile-nav-trigger {
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar container -->
  <div id="navbar-container" class="component-loading">
    <i class="fas fa-spinner fa-spin"></i>
    <span>Loading navigation...</span>
  </div>
  
  <!-- Header container -->
  <div id="header-container" class="component-loading">
    <i class="fas fa-spinner fa-spin"></i>
    <span>Loading header...</span>
  </div>

  <!-- HERO SECTION -->
  <section class="guide-hero">
    <h1>Naval Warfare Guide</h1>
    <p>Master the Movecraft plugin and command your own fleet of watercraft ships on GeoFrontier</p>
    <div class="hero-subtitle">Watercraft Only • No Blimps • Sea Battles • Ship Building</div>
  </section>

  <!-- MAIN CONTENT -->
  <div class="section">
    <!-- Quick Navigation - Now fixed position -->
    <div class="quick-nav" id="quickNav">
      <h3><i class="fas fa-compass"></i> Quick Navigation</h3>
      <div class="nav-links">
        <a href="#basics" class="nav-link">
          <i class="fas fa-anchor"></i> Basics
        </a>
        <a href="#building" class="nav-link">
          <i class="fas fa-hammer"></i> Building Ships
        </a>
        <a href="#piloting" class="nav-link">
          <i class="fas fa-ship"></i> Piloting Ships
        </a>
        <a href="#combat" class="nav-link">
          <i class="fas fa-crosshairs"></i> Naval Combat
        </a>
        <a href="#types" class="nav-link">
          <i class="fas fa-list"></i> Ship Types
        </a>
        <a href="#commands" class="nav-link">
          <i class="fas fa-terminal"></i> Commands
        </a>
      </div>
    </div>

    <!-- Mobile nav trigger -->
    <div class="mobile-nav-trigger" id="mobileNavTrigger">
      <i class="fas fa-bars"></i>
    </div>

    <div class="guide-content">
      <!-- Section 1: Basics -->
      <div class="guide-section" id="basics">
        <h2><i class="fas fa-anchor"></i> Movecraft Basics</h2>
        
        <div class="guide-card">
          <h3><i class="fas fa-info-circle"></i> What is Movecraft?</h3>
          <div class="guide-text">
            <p>Movecraft is a plugin that allows players to build and pilot multi-block ships on GeoFrontier. We use a <strong>watercraft-only</strong> configuration - no airships, blimps, or flying machines.</p>
            <p>All ships must float on water and follow naval physics. This guide covers everything you need to know about building, piloting, and fighting with ships.</p>
          </div>
        </div>

        <div class="guide-card">
          <h3><i class="fas fa-exclamation-triangle"></i> Important Notes</h3>
          <div class="guide-text">
            <div class="info-box warning">
              <h4><i class="fas fa-ban"></i> Watercraft Only</h4>
              <p>GeoFrontier only supports <strong>watercraft ships</strong>. Airships, blimps, submarines, and flying machines are disabled. All ships must float on water.</p>
            </div>
            
            <div class="info-box">
              <h4><i class="fas fa-shield-alt"></i> Protected Waters</h4>
              <p>You cannot pilot ships through protected territory without permission. Ships will stop at claim borders.</p>
            </div>
            
            <div class="info-box tip">
              <h4><i class="fas fa-lightbulb"></i> Pro Tip</h4>
              <p>Start with small ships before attempting large warships. Each ship type has different requirements and piloting difficulty.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 2: Building Ships -->
      <div class="guide-section" id="building">
        <h2><i class="fas fa-hammer"></i> Building Your First Ship</h2>
        
        <div class="guide-card">
          <h3><i class="fas fa-ruler-combined"></i> Ship Requirements</h3>
          <div class="guide-text">
            <p>Every watercraft ship must meet these basic requirements:</p>
            
            <div class="requirements-list">
              <div class="requirement-item">
                <i class="fas fa-check-circle"></i>
                <span>Must float on water</span>
              </div>
              <div class="requirement-item">
                <i class="fas fa-check-circle"></i>
                <span>No blocks below waterline</span>
              </div>
              <div class="requirement-item">
                <i class="fas fa-check-circle"></i>
                <span>At least 1 helm block</span>
              </div>
              <div class="requirement-item">
                <i class="fas fa-check-circle"></i>
                <span>Within size limits for ship type</span>
              </div>
            </div>
            
            <p><strong>Waterline Rule:</strong> Ships must have their lowest blocks at or above the water surface. Ships cannot have submerged sections.</p>
          </div>
        </div>

        <div class="guide-card">
          <h3><i class="fas fa-cogs"></i> Essential Ship Components</h3>
          <div class="guide-text">
            <p>Every ship needs these key components:</p>
            
            <ul>
              <li><strong>Helm Block:</strong> Controls the ship (Sign with [Ship] on first line)</li>
              <li><strong>Movement Blocks:</strong> Sails (Wool) or Engines (Furnaces)</li>
              <li><strong>Buoyancy Blocks:</strong> Wood/logs (keeps ship afloat)</li>
              <li><strong>Hull Blocks:</strong> Main structure (any solid block)</li>
            </ul>
            
            <div class="info-box">
              <h4><i class="fas fa-ship"></i> Helm Creation</h4>
              <p>To create a helm, place a sign and write on the first line:<br>
              <code>[Ship]</code><br>
              On the second line, put your ship's name. The sign must be attached to a solid block.</p>
            </div>
          </div>
        </div>

        <div class="guide-card">
          <h3><i class="fas fa-tools"></i> Building Steps</h3>
          <div class="guide-text">
            <ol>
              <li>Build your ship structure floating on water</li>
              <li>Place a helm sign with <code>[Ship]</code> and your ship name</li>
              <li>Add movement blocks (wool for sails or furnaces for engines)</li>
              <li>Ensure at least 25% of blocks are buoyant (wood/logs)</li>
              <li>Right-click the helm sign to pilot</li>
              <li>Use <code>/craft pilot</code> to release control</li>
            </ol>
            
            <div class="info-box tip">
              <h4><i class="fas fa-lightbulb"></i> Building Tips</h4>
              <p>Build in shallow water first! Test your ship in a bay or protected area before sailing into open waters.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 3: Piloting -->
      <div class="guide-section" id="piloting">
        <h2><i class="fas fa-ship"></i> Piloting & Navigation</h2>
        
        <div class="guide-card">
          <h3><i class="fas fa-compass"></i> Basic Controls</h3>
          <div class="guide-text">
            <p>Once you're piloting a ship (right-click helm), use these controls:</p>
            
            <ul>
              <li><strong>W:</strong> Move forward</li>
              <li><strong>S:</strong> Move backward</li>
              <li><strong>A:</strong> Turn left</li>
              <li><strong>D:</strong> Turn right</li>
              <li><strong>Space:</strong> Ascend (limited for watercraft)</li>
              <li><strong>Shift:</strong> Descend (limited for watercraft)</li>
              <li><strong>Right-click helm again:</strong> Release control</li>
            </ul>
            
            <div class="info-box">
              <h4><i class="fas fa-water"></i> Watercraft Limitations</h4>
              <p>Watercraft cannot ascend/descend significantly. They follow water surface and cannot fly. Space/Shift have minimal effect.</p>
            </div>
          </div>
        </div>

        <div class="guide-card">
          <h3><i class="fas fa-tachometer-alt"></i> Speed & Movement</h3>
          <div class="guide-text">
            <p>Ship speed depends on:</p>
            
            <ul>
              <li><strong>Ship Type:</strong> Different types have different max speeds</li>
              <li><strong>Movement Blocks:</strong> More sails/engines = faster</li>
              <li><strong>Ship Weight:</strong> Heavier ships accelerate slower</li>
              <li><strong>Water Depth:</strong> Shallow water slows ships</li>
            </ul>
            
            <p><strong>Turning:</strong> Larger ships turn slower. Small ships can make sharp turns, while large warships need wide turning circles.</p>
            
            <div class="info-box warning">
              <h4><i class="fas fa-exclamation-triangle"></i> Collision Warning</h4>
              <p>Ships can take damage from collisions with land, other ships, or structures. Damaged ships may sink!</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 4: Combat -->
      <div class="guide-section" id="combat">
        <h2><i class="fas fa-crosshairs"></i> Naval Combat</h2>
        
        <div class="guide-card">
          <h3><i class="fas fa-gun"></i> Ship Weapons</h3>
          <div class="guide-text">
            <p>GeoFrontier ships can be equipped with various weapons:</p>
            
            <ul>
              <li><strong>Cannons:</strong> TNT cannons for long-range bombardment</li>
              <li><strong>Ballistae:</strong> Arrow dispensers for anti-personnel</li>
              <li><strong>Rams:</strong> Reinforced bows for ship-to-ship collisions</li>
              <li><strong>Fire Projectiles:</strong> Flame arrows or fire charges</li>
            </ul>
            
            <p><strong>Important:</strong> All weapons must be manually operated by crew. No automated turrets.</p>
            
            <div class="info-box">
              <h4><i class="fas fa-users"></i> Crew Requirements</h4>
              <p>Large warships require multiple crew: Pilot, gunners, repair crew. Coordinate with your nation!</p>
            </div>
          </div>
        </div>

        <div class="guide-card">
          <h3><i class="fas fa-shield-alt"></i> Ship Armor & Defense</h3>
          <div class="guide-text">
            <p>Protect your ship with:</p>
            
            <ul>
              <li><strong>Armor Plating:</strong> Obsidian, iron blocks, or stone for hull</li>
              <li><strong>Compartmentalization:</strong> Watertight sections to prevent sinking</li>
              <li><strong>Repair Stations:</strong> Crafting tables and chests with repair materials</li>
              <li><strong>Maneuverability:</strong> Fast ships can dodge incoming fire</li>
            </ul>
            
            <div class="info-box warning">
              <h4><i class="fas fa-sink"></i> Sinking Mechanics</h4>
              <p>If a ship takes too much damage, it will sink. Sinking ships drop loot containers. Recover quickly!</p>
            </div>
          </div>
        </div>

        <div class="guide-card">
          <h3><i class="fas fa-chess-board"></i> Combat Tactics</h3>
          <div class="guide-text">
            <p>Effective naval strategies:</p>
            
            <ul>
              <li><strong>Broadside Attacks:</strong> Line up perpendicular to enemy to fire all cannons</li>
              <li><strong>Hit and Run:</strong> Fast ships attack then retreat</li>
              <li><strong>Wolf Pack:</strong> Multiple small ships surround larger target</li>
              <li><strong>Board and Capture:</strong> Ram enemy ship, then board for close combat</li>
            </ul>
            
            <p><strong>Remember:</strong> Naval combat rules apply during wars only. No attacking neutral ships!</p>
          </div>
        </div>
      </div>

      <!-- Section 5: Ship Types -->
      <div class="guide-section" id="types">
        <h2><i class="fas fa-list"></i> Ship Types & Classes</h2>
        
        <div class="ship-grid">
          <div class="ship-card">
            <h4>Raft</h4>
            <div class="ship-stats">
              <span class="ship-stat">Size: 5-50 blocks</span>
              <span class="ship-stat">Speed: Slow</span>
              <span class="ship-stat">Cost: Low</span>
            </div>
            <p>Basic transport. 1-2 players. No weapons. Perfect for beginners.</p>
          </div>
          
          <div class="ship-card">
            <h4>Sloop</h4>
            <div class="ship-stats">
              <span class="ship-stat">Size: 50-200 blocks</span>
              <span class="ship-stat">Speed: Fast</span>
              <span class="ship-stat">Cost: Medium</span>
            </div>
            <p>Small warship. 2-4 crew. 1-2 cannons. Fast scout vessel.</p>
          </div>
          
          <div class="ship-card">
            <h4>Brigantine</h4>
            <div class="ship-stats">
              <span class="ship-stat">Size: 200-500 blocks</span>
              <span class="ship-stat">Speed: Medium</span>
              <span class="ship-stat">Cost: High</span>
            </div>
            <p>Medium warship. 4-8 crew. 4-6 cannons. Balanced combat ship.</p>
          </div>
          
          <div class="ship-card">
            <h4>Galleon</h4>
            <div class="ship-stats">
              <span class="ship-stat">Size: 500-1500 blocks</span>
              <span class="ship-stat">Speed: Slow</span>
              <span class="ship-stat">Cost: Very High</span>
            </div>
            <p>Heavy warship. 8-16 crew. 10+ cannons. Floating fortress.</p>
          </div>
          
          <div class="ship-card">
            <h4>Merchant Ship</h4>
            <div class="ship-stats">
              <span class="ship-stat">Size: 200-800 blocks</span>
              <span class="ship-stat">Speed: Slow-Medium</span>
              <span class="ship-stat">Cost: Medium-High</span>
            </div>
            <p>Cargo transport. Large storage. Minimal weapons. Trade vessel.</p>
          </div>
          
          <div class="ship-card">
            <h4>Frigate</h4>
            <div class="ship-stats">
              <span class="ship-stat">Size: 300-700 blocks</span>
              <span class="ship-stat">Speed: Fast</span>
              <span class="ship-stat">Cost: High</span>
            </div>
            <p>Fast warship. 6-10 crew. 6-8 cannons. Patrol and escort.</p>
          </div>
        </div>
      </div>

      <!-- Section 6: Commands -->
      <div class="guide-section" id="commands">
        <h2><i class="fas fa-terminal"></i> Movecraft Commands</h2>
        
        <div class="guide-card">
          <h3><i class="fas fa-keyboard"></i> Essential Commands</h3>
          <div class="commands-grid">
            <div class="command-card">
              <div class="command-name">/craft pilot</div>
              <div class="command-desc">Start/stop piloting a ship</div>
            </div>
            
            <div class="command-card">
              <div class="command-name">/craft release</div>
              <div class="command-desc">Release control of ship</div>
            </div>
            
            <div class="command-card">
              <div class="command-name">/craft info</div>
              <div class="command-desc">Show ship statistics</div>
            </div>
            
            <div class="command-card">
              <div class="command-name">/craft rename &lt;name&gt;</div>
              <div class="command-desc">Rename your ship</div>
            </div>
            
            <div class="command-card">
              <div class="command-name">/craft list</div>
              <div class="command-desc">List all nearby ships</div>
            </div>
            
            <div class="command-card">
              <div class="command-name">/craft sink</div>
              <div class="command-desc">Sink your ship (irreversible!)</div>
            </div>
            
            <div class="command-card">
              <div class="command-name">/craft rotate</div>
              <div class="command-desc">Rotate ship 90 degrees</div>
            </div>
            
            <div class="command-card">
              <div class="command-name">/craft cruise</div>
              <div class="command-desc">Toggle cruise control</div>
            </div>
          </div>
        </div>

        <div class="guide-card">
          <h3><i class="fas fa-user-shield"></i> Captain Commands</h3>
          <div class="guide-text">
            <p>These commands require captain permissions:</p>
            
            <ul>
              <li><code>/craft addcrew &lt;player&gt;</code> - Add crew member</li>
              <li><code>/craft removecrew &lt;player&gt;</code> - Remove crew member</li>
              <li><code>/craft transfer &lt;player&gt;</code> - Transfer ownership</li>
              <li><code>/craft lock</code> - Lock ship to crew only</li>
              <li><code>/craft unlock</code> - Unlock ship</li>
            </ul>
            
            <div class="info-box">
              <h4><i class="fas fa-users"></i> Crew Permissions</h4>
              <p>Crew members can pilot but not add/remove other crew or transfer ownership.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Final Tips -->
      <div class="guide-section">
        <h2><i class="fas fa-graduation-cap"></i> Mastery Tips</h2>
        
        <div class="guide-card">
          <h3><i class="fas fa-star"></i> Becoming a Master Captain</h3>
          <div class="guide-text">
            <div class="info-box tip">
              <h4><i class="fas fa-lightbulb"></i> Practice in Peace</h4>
              <p>Build and test ships in protected waters before sailing into dangerous areas.</p>
            </div>
            
            <div class="info-box tip">
              <h4><i class="fas fa-lightbulb"></i> Crew Coordination</h4>
              <p>Use Discord voice chat for real-time coordination during battles.</p>
            </div>
            
            <div class="info-box tip">
              <h4><i class="fas fa-lightbulb"></i> Backup Ships</h4>
              <p>Always have a backup ship. Naval battles can result in total loss!</p>
            </div>
            
            <div class="info-box tip">
              <h4><i class="fas fa-lightbulb"></i> Know the Rules</h4>
              <p>Review war rules before engaging in naval combat. Some waters may be protected.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer container -->
  <div id="footer-container" class="component-loading" style="min-height: 150px;">
    <i class="fas fa-spinner fa-spin"></i>
    <span>Loading footer...</span>
  </div>

  <!-- COMPASS (BACK TO TOP) -->
  <div class="compass" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
    <i class="fas fa-compass"></i>
  </div>

  <!-- Load component loader -->
  <script src="js/components-loader.js"></script>
  
  <!-- Page-specific JavaScript -->
  <script>
    // ============================================
    // GLOBAL UTILITY FUNCTIONS
    // ============================================
    
    // Copy text function
    window.copyText = window.copyText || function(text) {
      navigator.clipboard.writeText(text).then(() => {
        const notification = document.createElement('div');
        notification.textContent = `Copied: ${text}`;
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: var(--accent-gold);
          color: var(--primary-dark);
          padding: 12px 24px;
          border-radius: 8px;
          font-weight: 600;
          z-index: 1000;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
          animation: fadeIn 0.3s ease;
        `;
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.style.animation = 'fadeOut 0.5s ease forwards';
          setTimeout(() => document.body.removeChild(notification), 500);
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy:', err);
        alert(`Copy this: ${text}`);
      });
    };
    
    // Initialize dropdowns globally
    function initializeDropdowns() {
      if (typeof window.initializeDropdowns === 'function') {
        window.initializeDropdowns();
      }
    }
    
    // Make functions globally available
    window.copyText = copyText;
    window.initializeDropdowns = initializeDropdowns;
    
    // ============================================
    // GUIDE PAGE FUNCTIONS
    // ============================================
    
    // Navigation highlighting
    function highlightActiveSection() {
      const sections = document.querySelectorAll('.guide-section');
      const navLinks = document.querySelectorAll('.nav-link');
      
      let currentSection = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        const scrollPosition = window.scrollY + 150;
        
        if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
          currentSection = section.id;
        }
      });
      
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${currentSection}`) {
          link.classList.add('active');
        }
      });
      
      // Show/hide quick nav based on scroll position
      const quickNav = document.getElementById('quickNav');
      if (quickNav) {
        if (window.scrollY > 300) {
          quickNav.classList.add('visible');
        } else {
          quickNav.classList.remove('visible');
        }
      }
    }
    
    // Toggle mobile nav
    function toggleMobileNav() {
      const quickNav = document.getElementById('quickNav');
      if (quickNav) {
        quickNav.classList.toggle('visible');
      }
    }
    
    // Smooth scrolling for nav links
    function setupSmoothScrolling() {
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href');
          const targetElement = document.querySelector(targetId);
          if (targetElement) {
            window.scrollTo({
              top: targetElement.offsetTop - 100,
              behavior: 'smooth'
            });
            
            // Close mobile nav if open
            if (window.innerWidth <= 768) {
              const quickNav = document.getElementById('quickNav');
              if (quickNav) {
                quickNav.classList.remove('visible');
              }
            }
          }
        });
      });
    }
    
    // ============================================
    // COMPONENT LOADING
    // ============================================
    
    // Manual component loading fallback
    async function loadComponentsManually() {
      console.log('Loading components manually...');
      
      const components = [
        { id: 'navbar', file: 'components/navbar.html', container: 'navbar-container' },
        { id: 'header', file: 'components/header.html', container: 'header-container' },
        { id: 'footer', file: 'components/footer.html', container: 'footer-container' }
      ];
      
      for (const component of components) {
        try {
          console.log(`Loading ${component.id} from ${component.file}`);
          const response = await fetch(component.file);
          if (!response.ok) {
            throw new Error(`Status: ${response.status}`);
          }
          const html = await response.text();
          const container = document.getElementById(component.container);
          if (container) {
            container.innerHTML = html;
            console.log(`${component.id} loaded successfully`);
            
            // Execute any scripts in the component
            const scripts = container.querySelectorAll('script');
            scripts.forEach(oldScript => {
              const newScript = document.createElement('script');
              Array.from(oldScript.attributes).forEach(attr => {
                newScript.setAttribute(attr.name, attr.value);
              });
              newScript.textContent = oldScript.textContent;
              oldScript.parentNode.replaceChild(newScript, oldScript);
            });
          }
        } catch (error) {
          console.error(`Failed to load ${component.id}:`, error);
          const container = document.getElementById(component.container);
          if (container) {
            container.innerHTML = `
              <div class="component-error">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Failed to load ${component.id}</h3>
                <p>File not found: ${component.file}</p>
                <p style="font-size: 0.9rem; color: var(--text-muted);">
                  Check that the file exists in the components folder
                </p>
              </div>
            `;
          }
        }
      }
    }
    
    // Set active navigation
    function setActiveNav(pageName) {
      setTimeout(() => {
        const navLinks = document.querySelectorAll('.main-nav a[data-nav], nav a[data-nav]');
        navLinks.forEach(link => {
          if (link.getAttribute('data-nav') === pageName) {
            link.classList.add('active');
          } else {
            link.classList.remove('active');
          }
        });
      }, 500);
    }
    
    // ============================================
    // PAGE INITIALIZATION
    // ============================================
    
    document.addEventListener('DOMContentLoaded', async () => {
      console.log('DOM loaded, starting guide page initialization...');
      
      try {
        // Load components using ComponentLoader if available
        if (window.ComponentLoader) {
          console.log('Using ComponentLoader...');
          
          // Load navbar first
          await window.ComponentLoader.loadComponent('navbar', 'navbar-container');
          console.log('Navbar loaded');
          
          // Initialize dropdowns after navbar loads
          setTimeout(() => {
            if (window.initializeDropdowns) {
              window.initializeDropdowns();
            }
          }, 100);
          
          // Load other components
          await window.ComponentLoader.loadComponent('header', 'header-container');
          console.log('Header loaded');
          
          await window.ComponentLoader.loadComponent('footer', 'footer-container');
          console.log('Footer loaded');
          
          // Set active navigation
          setActiveNav('guides');
          
        } else {
          console.log('ComponentLoader not found, loading manually');
          await loadComponentsManually();
          
          // Initialize dropdowns after components load
          setTimeout(() => {
            if (window.initializeDropdowns) {
              window.initializeDropdowns();
            }
          }, 200);
        }
        
        // Setup guide-specific functionality
        setupSmoothScrolling();
        
        // Setup scroll listener for nav highlighting
        window.addEventListener('scroll', highlightActiveSection);
        highlightActiveSection(); // Initial call
        
        // Setup mobile nav trigger
        const mobileNavTrigger = document.getElementById('mobileNavTrigger');
        if (mobileNavTrigger) {
          mobileNavTrigger.addEventListener('click', toggleMobileNav);
        }
        
        // Close mobile nav when clicking outside
        document.addEventListener('click', function(e) {
          const quickNav = document.getElementById('quickNav');
          const mobileTrigger = document.getElementById('mobileNavTrigger');
          
          if (quickNav && quickNav.classList.contains('visible') && 
              window.innerWidth <= 768 &&
              !quickNav.contains(e.target) && 
              !mobileTrigger.contains(e.target)) {
            quickNav.classList.remove('visible');
          }
        });
        
        console.log('Guide page initialization complete!');
        
      } catch (error) {
        console.error('Error during page initialization:', error);
      }
    });
    
    // Reinitialize dropdowns when components are loaded via event
    document.addEventListener('componentLoaded', (event) => {
      if (event.detail.componentId === 'navbar') {
        console.log('Navbar component loaded, initializing dropdowns...');
        setTimeout(() => {
          if (window.initializeDropdowns) {
            window.initializeDropdowns();
          }
        }, 100);
      }
    });
  </script>
</body>
</html>
